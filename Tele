local Players = game:GetService("Players")
local player = Players.LocalPlayer

-- GUI
local gui = Instance.new("ScreenGui")
gui.Name = "TPGui"
gui.ResetOnSpawn = false
gui.Parent = player:WaitForChild("PlayerGui")

-- Nút bật/tắt
local btn = Instance.new("TextButton")
btn.Size = UDim2.new(0,140,0,50)
btn.Position = UDim2.new(0.1,0,0.1,0)
btn.Text = "❌ TP OFF"
btn.TextScaled = true
btn.BackgroundColor3 = Color3.fromRGB(200,50,50)
btn.TextColor3 = Color3.fromRGB(255,255,255)
btn.Font = Enum.Font.GothamBold
btn.Parent = gui

-- Làm nút bo góc
local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0,12)
corner.Parent = btn

-- Bóng mờ nút
local shadow = Instance.new("UIStroke")
shadow.Color = Color3.fromRGB(0,0,0)
shadow.Thickness = 2
shadow.Transparency = 0.4
shadow.Parent = btn

-- Cho phép kéo thả nút
btn.Active = true
btn.Draggable = true

-- Trạng thái bật/tắt
local tpEnabled = false

-- Đổi trạng thái
btn.MouseButton1Click:Connect(function()
	tpEnabled = not tpEnabled
	if tpEnabled then
		btn.Text = "✅ TP ON"
		btn.BackgroundColor3 = Color3.fromRGB(50,200,50)
	else
		btn.Text = "❌ TP OFF"
		btn.BackgroundColor3 = Color3.fromRGB(200,50,50)
	end
end)

-- Chat command
player.Chatted:Connect(function(msg)
	if not tpEnabled then return end -- chỉ hoạt động khi bật

	if string.sub(msg, 1, 4) == "/tp_" then
		local targetName = string.sub(msg, 5)
		local targetPlayer = Players:FindFirstChild(targetName)

		if targetPlayer and targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
			if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
				player.Character.HumanoidRootPart.CFrame =
					targetPlayer.Character.HumanoidRootPart.CFrame + Vector3.new(3,0,0)
			end
		else
			-- nếu không tìm thấy thì thông báo trên màn hình
			local hint = Instance.new("Hint", workspace)
			hint.Text = "❌ Không tìm thấy người chơi: " .. targetName
			game:GetService("Debris"):AddItem(hint, 3)
		end
	end
end)
